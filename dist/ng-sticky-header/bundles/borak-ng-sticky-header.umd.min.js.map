{"version":3,"sources":["ng://@borak/ng-sticky-header/lib/ng-sticky-header-container.directive.ts","ng://@borak/ng-sticky-header/lib/ng-sticky-header.directive.ts","ng://@borak/ng-sticky-header/lib/ng-sticky-header.module.ts"],"names":["StickyHeaderContainerDirective","elementRef","this","Directive","args","selector","ElementRef","StickyHeaderDirective","appStickyHeaderContainer","el","prototype","ngOnInit","registerSticky","getParrent","parentElement","computeOffsetTop","totalOffset","offsetTop","getBottomTreshold","offsetHeight","_this","fixedGuard","absoluteGuard","listener","widthToSet","nativeElement","offsetWidth","leftToSet","getBoundingClientRect","left","parrent","style","zIndex","bottomTreshold","position","window","scrollY","paddingTop","top","bottom","undefined","width","offsetParent","addEventListener","NgStickyHeaderModule","NgModule","declarations","imports","exports"],"mappings":"2TAAA,IAAAA,EAAA,WAME,SAAAA,EAAmBC,GAAAC,KAAAD,WAAAA,EACrB,2BALCE,EAAAA,UAASC,KAAA,CAAC,CACTC,SAAU,0EAHQC,EAAAA,cAOpBN,EAPA,GCAA,IAAAO,EAAA,WAOE,SAAAA,EAAoBC,EAAkEC,GAAlEP,KAAAM,yBAAAA,EAAkEN,KAAAO,GAAAA,EAsExF,OApEEF,EAAAG,UAAAC,SAAA,WACET,KAAKU,kBAGPL,EAAAG,UAAAG,WAAA,SAAWJ,GACT,OAAOA,EAAGK,eAGZP,EAAAG,UAAAK,iBAAA,SAAiBN,OAEXO,EAAc,EAClB,GACEA,GAAyBP,EAHqCQ,UAI9DR,EAAKA,EAAe,mBACbA,GACT,OAAOO,GAGTT,EAAAG,UAAAQ,kBAAA,SAAkBT,GAChB,OAAOP,KAAKa,iBAAiBN,GAAMA,EAAGU,cAGxCZ,EAAAG,UAAAE,eAAA,WAAA,IAGMK,EAHNG,EAAAlB,KACMmB,GAAa,EACbC,GAAgB,EAGdC,EAAQ,eACNC,EAAaJ,EAAKZ,yBAAyBP,WAAWwB,cAAcC,YACpEC,EAAYP,EAAKZ,yBAAyBP,WAAWwB,cAAcG,wBAAwBC,KAC3FC,EAAUV,EAAKP,WAAWO,EAAKX,GAAgB,eAChDY,GAAeC,IAClBL,EAAYG,EAAKL,iBAAiBK,EAAKX,GAAGgB,gBAE5CL,EAAKX,GAAGgB,cAAcM,MAAMC,OAAS,QAC/BC,EAAiBb,EAAKF,kBAAkBY,GAC9CA,EAAQC,MAAMG,SAAW,WACrBC,OAAOC,SAAWnB,GAA2B,IAAdA,GACjCa,EAAQC,MAAMM,WAAgBjB,EAAKX,GAAGgB,cAAcN,aAAY,KAChEC,EAAKX,GAAGgB,cAAcM,MAAMG,SAAW,QACvCd,EAAKX,GAAGgB,cAAcM,MAAMO,IAAM,EAClClB,EAAKX,GAAGgB,cAAcM,MAAMQ,YAASC,EACrCpB,EAAKX,GAAGgB,cAAcM,MAAMU,MAAWjB,EAAU,KACjDJ,EAAKX,GAAGgB,cAAcM,MAAMF,KAAUF,EAAS,KAC/CN,GAAa,IAEbD,EAAKX,GAAGgB,cAAcM,MAAMO,IAAM,EAClClB,EAAKX,GAAGgB,cAAcM,MAAMQ,OAAS,GACrCnB,EAAKX,GAAGgB,cAAcM,MAAMU,MAAQ,GACpCrB,EAAKX,GAAGgB,cAAcM,MAAMF,KAAO,GACnCC,EAAQC,MAAMM,WAAa,MAC3BjB,EAAKX,GAAGgB,cAAcM,MAAMG,SAAW,SACvCb,EAAaC,GAAgB,GAE3Ba,OAAOC,SAAWH,EAAiBb,EAAKX,GAAGgB,cAAcN,cAAmC,IAAnBc,IAC3Eb,EAAKX,GAAGgB,cAAcM,MAAMG,SAAW,WACvCd,EAAKX,GAAGgB,cAAcM,MAAMU,MAAQ,OACpCrB,EAAKX,GAAGgB,cAAcM,MAAMF,KAAUF,EACtCP,EAAKX,GAAGgB,cAAciB,aAAad,wBAAwBC,KAAI,KAC/DT,EAAKX,GAAGgB,cAAcM,MAAMQ,OAAS,EACrCnB,EAAKX,GAAGgB,cAAcM,MAAMO,IAAM,GAClChB,GAAgB,IAIpBa,OAAOQ,iBAAiB,SAAUpB,GAClCY,OAAOQ,iBAAiB,SAAUpB,wBAxErCpB,EAAAA,UAASC,KAAA,CAAC,CACTC,SAAU,iEAHHL,SADmBM,EAAAA,cA6E5BC,EA7EA,GCAA,IAAAqC,EAAA,WAMA,SAAAA,KAYoC,2BAZnCC,EAAAA,SAAQzC,KAAA,CAAC,CACR0C,aAAc,CACZ9C,EACAO,GAEFwC,QAAS,GAETC,QAAS,CACPhD,EACAO,OAGgCqC,EAlBpC","sourcesContent":["import { Directive, ElementRef } from '@angular/core';\n\n@Directive({\n  selector: '[appStickyHeaderContainer]'\n})\nexport class StickyHeaderContainerDirective {\n  constructor(public elementRef: ElementRef) {}\n}\n","import { Directive, OnInit, ElementRef } from '@angular/core';\nimport { StickyHeaderContainerDirective } from './ng-sticky-header-container.directive';\n\n@Directive({\n  selector: '[appStickyHeader]'\n})\nexport class StickyHeaderDirective implements OnInit {\n  constructor(private appStickyHeaderContainer: StickyHeaderContainerDirective, private el: ElementRef) {}\n\n  ngOnInit(): void {\n    this.registerSticky();\n  }\n\n  getParrent(el: Element): HTMLElement {\n    return el.parentElement;\n  }\n\n  computeOffsetTop(el: HTMLElement): number {\n    const getOffset = (elToCheck: HTMLElement): number => elToCheck.offsetTop;\n    let totalOffset = 0;\n    do {\n      totalOffset += getOffset(el);\n      el = el.offsetParent as HTMLElement;\n    } while (el);\n    return totalOffset;\n  }\n\n  getBottomTreshold(el: HTMLElement): number {\n    return this.computeOffsetTop(el) + el.offsetHeight;\n  }\n\n  registerSticky() {\n    let fixedGuard = false;\n    let absoluteGuard = false;\n    let offsetTop;\n\n    const listener = () => {\n      const widthToSet = this.appStickyHeaderContainer.elementRef.nativeElement.offsetWidth;\n      const leftToSet = this.appStickyHeaderContainer.elementRef.nativeElement.getBoundingClientRect().left;\n      const parrent = this.getParrent(this.el.nativeElement as Element);\n      if (!fixedGuard && !absoluteGuard) {\n        offsetTop = this.computeOffsetTop(this.el.nativeElement);\n      }\n      this.el.nativeElement.style.zIndex = 100;\n      const bottomTreshold = this.getBottomTreshold(parrent);\n      parrent.style.position = 'relative';\n      if (window.scrollY >= offsetTop && offsetTop !== 0) {\n        parrent.style.paddingTop = `${this.el.nativeElement.offsetHeight}px`;\n        this.el.nativeElement.style.position = 'fixed';\n        this.el.nativeElement.style.top = 0;\n        this.el.nativeElement.style.bottom = undefined;\n        this.el.nativeElement.style.width = `${widthToSet}px`;\n        this.el.nativeElement.style.left = `${leftToSet}px`;\n        fixedGuard = true;\n      } else {\n        this.el.nativeElement.style.top = 0;\n        this.el.nativeElement.style.bottom = ``;\n        this.el.nativeElement.style.width = ``;\n        this.el.nativeElement.style.left = ``;\n        parrent.style.paddingTop = '0px';\n        this.el.nativeElement.style.position = 'static';\n        fixedGuard = absoluteGuard = false;\n      }\n      if (window.scrollY >= bottomTreshold - this.el.nativeElement.offsetHeight && bottomTreshold !== 0) {\n        this.el.nativeElement.style.position = 'absolute';\n        this.el.nativeElement.style.width = `100%`;\n        this.el.nativeElement.style.left = `${leftToSet -\n        this.el.nativeElement.offsetParent.getBoundingClientRect().left}px`;\n        this.el.nativeElement.style.bottom = 0;\n        this.el.nativeElement.style.top = '';\n        absoluteGuard = true;\n      }\n    };\n\n    window.addEventListener('scroll', listener);\n    window.addEventListener('resize', listener);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { StickyHeaderDirective } from './ng-sticky-header.directive';\nimport { StickyHeaderContainerDirective } from './ng-sticky-header-container.directive';\n\n\n\n@NgModule({\n  declarations: [\n    StickyHeaderContainerDirective,\n    StickyHeaderDirective\n  ],\n  imports: [\n  ],\n  exports: [\n    StickyHeaderContainerDirective,\n    StickyHeaderDirective\n  ]\n})\nexport class NgStickyHeaderModule { }\n"]}
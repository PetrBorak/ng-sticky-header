{"version":3,"file":"borak-ng-sticky-header.umd.js","sources":["ng://@borak/ng-sticky-header/lib/ng-sticky-header-container.directive.ts","ng://@borak/ng-sticky-header/lib/ng-sticky-header.directive.ts","ng://@borak/ng-sticky-header/lib/ng-sticky-header.module.ts"],"sourcesContent":["import { Directive, ElementRef } from '@angular/core';\n\n@Directive({\n  selector: '[appStickyHeaderContainer]'\n})\nexport class StickyHeaderContainerDirective {\n  constructor(public elementRef: ElementRef) {}\n}\n","import { Directive, OnInit, ElementRef } from '@angular/core';\nimport { StickyHeaderContainerDirective } from './ng-sticky-header-container.directive';\n\n@Directive({\n  selector: '[appStickyHeader]'\n})\nexport class StickyHeaderDirective implements OnInit {\n  constructor(private appStickyHeaderContainer: StickyHeaderContainerDirective, private el: ElementRef) {}\n\n  ngOnInit(): void {\n    this.registerSticky();\n  }\n\n  getParrent(el: Element): HTMLElement {\n    return el.parentElement;\n  }\n\n  computeOffsetTop(el: HTMLElement): number {\n    const getOffset = (elToCheck: HTMLElement): number => elToCheck.offsetTop;\n    let totalOffset = 0;\n    do {\n      totalOffset += getOffset(el);\n      el = el.offsetParent as HTMLElement;\n    } while (el);\n    return totalOffset;\n  }\n\n  getBottomTreshold(el: HTMLElement): number {\n    return this.computeOffsetTop(el) + el.offsetHeight;\n  }\n\n  registerSticky() {\n    let fixedGuard = false;\n    let absoluteGuard = false;\n    let offsetTop;\n\n    const listener = () => {\n      const widthToSet = this.appStickyHeaderContainer.elementRef.nativeElement.offsetWidth;\n      const leftToSet = this.appStickyHeaderContainer.elementRef.nativeElement.getBoundingClientRect().left;\n      const parrent = this.getParrent(this.el.nativeElement as Element);\n      if (!fixedGuard && !absoluteGuard) {\n        offsetTop = this.computeOffsetTop(this.el.nativeElement);\n      }\n      this.el.nativeElement.style.zIndex = 100;\n      const bottomTreshold = this.getBottomTreshold(parrent);\n      parrent.style.position = 'relative';\n      if (window.scrollY >= offsetTop && offsetTop !== 0) {\n        parrent.style.paddingTop = `${this.el.nativeElement.offsetHeight}px`;\n        this.el.nativeElement.style.position = 'fixed';\n        this.el.nativeElement.style.top = 0;\n        this.el.nativeElement.style.bottom = undefined;\n        this.el.nativeElement.style.width = `${widthToSet}px`;\n        this.el.nativeElement.style.left = `${leftToSet}px`;\n        fixedGuard = true;\n      } else {\n        this.el.nativeElement.style.top = 0;\n        this.el.nativeElement.style.bottom = ``;\n        this.el.nativeElement.style.width = ``;\n        this.el.nativeElement.style.left = ``;\n        parrent.style.paddingTop = '0px';\n        this.el.nativeElement.style.position = 'static';\n        fixedGuard = absoluteGuard = false;\n      }\n      if (window.scrollY >= bottomTreshold - this.el.nativeElement.offsetHeight && bottomTreshold !== 0) {\n        this.el.nativeElement.style.position = 'absolute';\n        this.el.nativeElement.style.width = `100%`;\n        this.el.nativeElement.style.left = `${leftToSet -\n        this.el.nativeElement.offsetParent.getBoundingClientRect().left}px`;\n        this.el.nativeElement.style.bottom = 0;\n        this.el.nativeElement.style.top = '';\n        absoluteGuard = true;\n      }\n    };\n\n    window.addEventListener('scroll', listener);\n    window.addEventListener('resize', listener);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { StickyHeaderDirective } from './ng-sticky-header.directive';\nimport { StickyHeaderContainerDirective } from './ng-sticky-header-container.directive';\n\n\n\n@NgModule({\n  declarations: [\n    StickyHeaderContainerDirective,\n    StickyHeaderDirective\n  ],\n  imports: [\n  ],\n  exports: [\n    StickyHeaderContainerDirective,\n    StickyHeaderDirective\n  ]\n})\nexport class NgStickyHeaderModule { }\n"],"names":["Directive","ElementRef","NgModule"],"mappings":"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"}
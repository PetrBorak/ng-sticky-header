{"version":3,"file":"borak-ng-sticky-header.js","sources":["ng://@borak/ng-sticky-header/lib/ng-sticky-header-container.directive.ts","ng://@borak/ng-sticky-header/lib/ng-sticky-header.directive.ts","ng://@borak/ng-sticky-header/lib/ng-sticky-header.module.ts"],"sourcesContent":["import { Directive, ElementRef } from '@angular/core';\n\n@Directive({\n  selector: '[appStickyHeaderContainer]'\n})\nexport class StickyHeaderContainerDirective {\n  constructor(public elementRef: ElementRef) {}\n}\n","import { Directive, OnInit, ElementRef } from '@angular/core';\nimport { StickyHeaderContainerDirective } from './ng-sticky-header-container.directive';\n\n@Directive({\n  selector: '[appStickyHeader]'\n})\nexport class StickyHeaderDirective implements OnInit {\n  constructor(private appStickyHeaderContainer: StickyHeaderContainerDirective, private el: ElementRef) {}\n\n  ngOnInit(): void {\n    this.registerSticky();\n  }\n\n  getParrent(el: Element): HTMLElement {\n    return el.parentElement;\n  }\n\n  computeOffsetTop(el: HTMLElement): number {\n    const getOffset = (elToCheck: HTMLElement): number => elToCheck.offsetTop;\n    let totalOffset = 0;\n    do {\n      totalOffset += getOffset(el);\n      el = el.offsetParent as HTMLElement;\n    } while (el);\n    return totalOffset;\n  }\n\n  getBottomTreshold(el: HTMLElement): number {\n    return this.computeOffsetTop(el) + el.offsetHeight;\n  }\n\n  registerSticky() {\n    let fixedGuard = false;\n    let absoluteGuard = false;\n    let offsetTop;\n\n    const listener = () => {\n      const widthToSet = this.appStickyHeaderContainer.elementRef.nativeElement.offsetWidth;\n      const leftToSet = this.appStickyHeaderContainer.elementRef.nativeElement.getBoundingClientRect().left;\n      const parrent = this.getParrent(this.el.nativeElement as Element);\n      if (!fixedGuard && !absoluteGuard) {\n        offsetTop = this.computeOffsetTop(this.el.nativeElement);\n      }\n      this.el.nativeElement.style.zIndex = 100;\n      const bottomTreshold = this.getBottomTreshold(parrent);\n      parrent.style.position = 'relative';\n      if (window.scrollY >= offsetTop && offsetTop !== 0) {\n        parrent.style.paddingTop = `${this.el.nativeElement.offsetHeight}px`;\n        this.el.nativeElement.style.position = 'fixed';\n        this.el.nativeElement.style.top = 0;\n        this.el.nativeElement.style.bottom = undefined;\n        this.el.nativeElement.style.width = `${widthToSet}px`;\n        this.el.nativeElement.style.left = `${leftToSet}px`;\n        fixedGuard = true;\n      } else {\n        this.el.nativeElement.style.top = 0;\n        this.el.nativeElement.style.bottom = ``;\n        this.el.nativeElement.style.width = ``;\n        this.el.nativeElement.style.left = ``;\n        parrent.style.paddingTop = '0px';\n        this.el.nativeElement.style.position = 'static';\n        fixedGuard = absoluteGuard = false;\n      }\n      if (window.scrollY >= bottomTreshold - this.el.nativeElement.offsetHeight && bottomTreshold !== 0) {\n        this.el.nativeElement.style.position = 'absolute';\n        this.el.nativeElement.style.width = `100%`;\n        this.el.nativeElement.style.left = `${leftToSet -\n        this.el.nativeElement.offsetParent.getBoundingClientRect().left}px`;\n        this.el.nativeElement.style.bottom = 0;\n        this.el.nativeElement.style.top = '';\n        absoluteGuard = true;\n      }\n    };\n\n    window.addEventListener('scroll', listener);\n    window.addEventListener('resize', listener);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { StickyHeaderDirective } from './ng-sticky-header.directive';\nimport { StickyHeaderContainerDirective } from './ng-sticky-header-container.directive';\n\n\n\n@NgModule({\n  declarations: [\n    StickyHeaderContainerDirective,\n    StickyHeaderDirective\n  ],\n  imports: [\n  ],\n  exports: [\n    StickyHeaderContainerDirective,\n    StickyHeaderDirective\n  ]\n})\nexport class NgStickyHeaderModule { }\n"],"names":[],"mappings":"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"}